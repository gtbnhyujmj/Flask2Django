æ„æ€æ˜¯ä½  accounts/urls.py è£¡çš„è·¯ç”±è¨­å®šæœ‰ views.api_usersï¼Œä½†ä½  accounts/views.py æ²’æœ‰å®šç¾© api_users é€™å€‹å‡½å¼ã€‚

ä½ éœ€è¦åœ¨ D:\vicent\sc\accounts\views.py è£¡åŠ ä¸Š api_users å‡½å¼ï¼Œç¯„ä¾‹å¦‚ä¸‹ï¼š
python
è¤‡è£½
ç·¨è¼¯
from django.http import JsonResponse
from .models import User

def api_users(request):
    users = User.objects.all()
    users_data = []
    for user in users:
        users_data.append({
            'id': user.id,
            'username': user.username,
            'password_hash': user.password,  # Django çš„å¯†ç¢¼æ¬„ä½æ˜¯ passwordï¼Œä¸æ˜¯ password_hash
        })
    return JsonResponse(users_data, safe=False)
åŒæ™‚ï¼Œæˆ‘å¹«ä½ æ•´ç†ä¸€ä»½æœ€å®Œæ•´ã€åŒ…å« json_view å’Œ api_users çš„ views.py åƒè€ƒï¼š
python
è¤‡è£½
ç·¨è¼¯
from django.shortcuts import render, redirect
from django.contrib.auth import login, authenticate, logout
from django.contrib.auth.decorators import login_required
from django.http import JsonResponse
from urllib.parse import parse_qs
from django.views.decorators.csrf import csrf_exempt
from .forms import RegisterForm
from .models import User

def home(request):
    return render(request, 'home.html')

def register(request):
    if request.method == 'POST':
        form = RegisterForm(request.POST)
        if form.is_valid():
            user = form.save()
            login(request, user)
            return redirect('dashboard')
    else:
        form = RegisterForm()
    return render(request, 'register.html', {'form': form})

def login_view(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(request, username=username, password=password)
        if user is not None:
            login(request, user)
            return redirect('dashboard')
        else:
            return render(request, 'login.html', {'error': 'å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤'})
    return render(request, 'login.html')

def logout_view(request):
    logout(request)
    return redirect('home')

@login_required
def dashboard(request):
    return render(request, 'dashboard.html', {'username': request.user.username})

@csrf_exempt
def json_view(request):
    raw_data = ""
    parsed_dict = {}

    if request.method == "POST":
        raw_data = request.body.decode('utf-8')
    elif request.method == "GET":
        raw_data = request.META.get('QUERY_STRING', '')

    parsed_qs = parse_qs(raw_data)
    parsed_dict = {k: v[0] if len(v) == 1 else v for k, v in parsed_qs.items()}

    context = {
        'raw_data': raw_data,
        'parsed_dict': parsed_dict,
    }
    return render(request, 'json_view.html', context)

def api_users(request):
    users = User.objects.all()
    users_data = []
    for user in users:
        users_data.append({
            'id': user.id,
            'username': user.username,
            'password_hash': user.password,  # Django å¯†ç¢¼æ¬„ä½æ˜¯ password
        })
    return JsonResponse(users_data, safe=False)
è£œå……
è«‹ç¢ºèª accounts/urls.py è£¡è·¯ç”±è¨­å®šèˆ‡ä½ å¯«çš„ view å‡½å¼ä¸€è‡´

è¨˜å¾—åœ¨ templates/ è£¡æœ‰å°æ‡‰çš„ json_view.htmlï¼ˆæˆ‘ä¹‹å‰çµ¦éï¼‰

å®Œæˆå¾Œå†è©¦è©¦ï¼š

bash
è¤‡è£½
ç·¨è¼¯
python manage.py runserver
è‹¥é‚„æœ‰éŒ¯èª¤ï¼Œç›´æ¥è²¼éŒ¯èª¤è¨Šæ¯çµ¦æˆ‘ï¼Œæˆ‘å¹«ä½ åˆ†æã€‚
ä½ å·²ç¶“å¾ˆæ£’äº†ï¼Œåˆ¥ç°å¿ƒï¼Œæˆ‘é™ªä½ ä¸€èµ·èµ°ï¼ğŸ’ª
